This is a mirror of http://www.vim.org/scripts/script.php?script_id=1093

"   Initially based on tar.vim by Michael C. Toren
"   Other than the initial autocommands and some function
"   layouts, very little is the same.
"
" Platform:
"   Linux:
"     All testing done on linux so it should work fine in linux
"     environments that satisfy the dependencies below.
"   Windows (Cygwin):
"     Works in conjunction with cygwin_utils.vim plugin.
"     Make sure to read the Description comments in cygwin_utils.vim for
"     configuration instructions and other notes.
"
" Dependencies:
"   - unzip: must support -c (extract to stdout)
"   - zip: to edit files in a jar, war, ear, rar, sar, zip
"   - tar: must support -O (extract to stdout), -j (for bz2),
"     -z (for tgz, gz, Z)
"   - table_format.vim (tested with version 1.0) or
"     Align.vim (tested with version 26 ) for formatting
"     archive file layout
"   - Viewing of .class files from archives depends on the following
"     mapping (in vimrc or elsewhere) being loaded
"     (and of course having jad installed):
"       "view java class files with jad
"       augr class
"         au!
"         au bufreadpost,filereadpost *.class %!jad -noctor -ff -i -p -t2 -b %
"         au bufreadpost,filereadpost *.class silent set readonly
"         au bufreadpost,filereadpost *.class silent set ft=java
"         au bufreadpost,filereadpost *.class silent normal gg=G
"         au bufreadpost,filereadpost *.class silent set nomodified
"       augr END
"
" Usage:
"   To start the viewer
"     vim a_tar_file.tar
"
"   To view a file or nested archive, simple hit enter on the line for
"   that file.
"
"   - To add a file to an archive hit "a", and follow the prompts.
"   - To edit a file in an archive hit "e" while viewing the file, edit
"     it and save it with ":w".
"   - To delete a file hit "r" on the line for that file.  To delete more
"     than one file, simple use visual mode (V) to select the files to
"     delete.
"   - To extract a file hit "x" on the line for that file.  To extract more
"     than one file, simple use visual mode (V) to select the files to
"     extract.
"   - To extract the entire archive use "X".
"
"   For jar files there is also a global function "ViewJarUrl(url,wincmd)",
"   that takes a java standard jar url, and vim window commands to open
"   a file.
"   The format of the url is
"     jar:{url}!{file}
"   Ex.
"     jar:file:///home/myusr/myjar.jar!/adir/afile.txt
"
"   Currently, only "file:" urls are supported (not "http:", "ftp:", etc).
"
"   Ex. Usage of ViewJarUrl() to open a file in a new maximized window.
"     call ViewJarUrl("jar:file:///home/myusr/myjar.jar!/adir/afile.txt",
"       \ "new | winc _")
"
" Configuration:
"
"   g:ArchiveViewerPrompt
"     Defaults to 1.  Determines if prompts are used to capture
"     the directory name for extraction and adding files.  When
"     set to 1 prompts (using the input() function of vim) are used.
"     When set to 0, a : command is initiated for you that you can
"     complete to execute the action.
"
"     When hitting 'x' or 'X' to extract files the following : command
"     is initiated...
"       :ExtactTo 
"     Simply supply the directory to extract to after that and hit
"     enter to execute.
"
"     When hitting 'a' to add files the following : command is initiated...
"       :AddFilesFrom 
"     Supply the directory to start in (the directory that all added files
"     should be relative to) and hit enter.  You will then be prompted for
"     the files to add.
"
"     This was added because vim's input() function does not have
"     path completion, but : commands do.
"
"     Ex. let g:ArchiveViewerPrompt = 0

